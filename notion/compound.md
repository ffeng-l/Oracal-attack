# Compound

## 报道

[Compound被攻击1亿美元遭清算， 又是预言机的锅！](https://www.sohu.com/a/435161525\_120640517)

## 背景

Compound是抵押贷款协议，用户可以抵押一种代币来借出另一种代币，且抵押物的价值要求大于借贷物价值。例如：用户可以抵押价值100美元的DAI，借出80美元的WBTC。

而当借出的价值80美元的WBTC涨到100美元以上时，此时借贷物的价值已经超过抵押物的价值，会触发清算，清算者可以选择用户的抵押物进行清算。

本次事件是因为：Coinbase Pro上的DAI价格从稳定币的1美元附近迅速攀升到1.34美元，而Coinbase Pro作为Compound的价格预言机它的价格波动导致了相关DAI的借贷抵押资产价值不足，触发了清算。

虽然并不能确实此次Coinbase Pro的DAI价格波动是否是攻击行为，但是StakeCapital创始人Julien Bouteloup以及专业的套利交易员Sam Priestley都对此事件做了分析，他们认为是有人进行了预言机操纵攻击，通过DAI的预言机的价格快速波动套利了355万美元

## 攻击步骤

1. 攻击者通过Uniswap的WETH-DAI的闪电贷 借出了`4600万DAI`。
2. 在Compound 中Supply DAI，操纵Coinbase Pro的预言机价格(手段未知)，触发清算。
3. 由于DAI的价格飙升导致借方抵押物不足触发了清算，攻击者选择了抵押资产中的cDAI作为了清算物品。获取了24亿的cDAI。
4. 将获取的cDAI中的换了4630万的DAI，用来偿还Uniswap中的闪电贷。

攻击者套利了1.7亿个cDAI大致价值355万美元。

## 总结

推测是预言机攻击，不存在不一致。
